# 文档管理与技术广场产品需求文档

## 1. 项目概述和目标

### 1.1 项目背景
在现有用户系统和AI开发平台基础上，新增文档管理和技术广场功能，为用户提供文档创作、分享、交流的完整生态。

### 1.2 项目目标
- 提供完整的文档管理功能（创建、编辑、发布、分享）
- 构建用户文档分享交流社区
- 通过AI审核确保内容质量
- 促进知识分享和技术交流

### 1.3 目标平台
Web应用（浏览器访问）

## 2. 用户画像和使用场景

### 2.1 目标用户
技术学习者、开发者、知识分享者

### 2.2 主要使用场景
- 用户创建和管理个人技术文档
- 分享优质内容到技术广场
- 浏览和学习他人分享的文档
- 通过评论和互动进行技术交流

## 3. 功能需求清单

### 3.1 导航更新
**功能描述：** 在现有导航基础上新增文档管理入口
**具体要求：**
- 顶部导航栏新增："文档管理"和"技术广场"
- 主页新增文档管理功能大卡片展示

### 3.2 文档管理模块

#### 3.2.1 文档创建与编辑
**功能描述：** 支持在线创建MD文档和上传文档文件
**具体要求：**
- **MD编辑器功能**：
  - 纯文字编辑（不支持图片插入）
  - 内置"AI优化"按钮（手动触发）
  - AI生成内容预览和应用功能
  - 支持Ctrl+Z撤销操作
  - **预览功能**：
    - 默认分屏模式（左编辑右预览）
    - 全页预览模式
    - 预览模式可切换
    - 实时渲染MD语法效果
- 文件上传功能（支持MD、PDF格式）
- 分层级文件夹管理（最多3层：根目录→一级文件夹→二级文件夹）
- 文件格式验证（验证扩展名+文件头+内容完整性）

#### 3.2.2 文档操作功能
**功能描述：** 提供完整的文档生命周期管理
**具体要求：**
- **发布功能**：将文档发布到技术广场
- **取消发布**：文档保留在个人文档，技术广场不展示
- **更新发布**：修改已发布文档后同步更新技术广场（保留评论、点赞、链接）
- **删除文档**：彻底删除文件，技术广场也消失
- **下载功能**：支持个人文档下载

#### 3.2.3 个人文档管理界面
**功能描述：** 列表视图展示个人文档
**具体要求：**
- 显示：文件名 + 修改时间 + 发布状态 + 操作按钮
- 操作按钮：编辑、发布/取消发布/更新发布、下载、删除
- 文件夹树形结构导航

### 3.3 AI审核系统

#### 3.3.1 审核机制
**功能描述：** 对发布内容进行AI审核
**具体要求：**
- 后端写死多个接口，每个AI一个专门接口
- 审核通过返回true，失败返回具体原因
- 更新发布时每次都需重新审核，审核期间技术广场显示旧版本
- 审核失败在个人文档中显示失败原因

#### 3.3.2 发布限制
**功能描述：** 设定文档发布的格式和大小限制
**具体要求：**
- PDF文档：不超过10页
- MD文档：相当于10页A4纸内容的字符限制
- 只支持MD和PDF格式发布

### 3.4 技术广场模块

#### 3.4.1 文档展示
**功能描述：** 展示所有用户发布的文档
**具体要求：**
- 文档列表显示：文档标题 + 作者昵称 + 发布时间 + 点赞数 + 收藏数 + 用户手动填写的简短摘要
- 文档详情页面展示完整内容
- 支持MD和PDF格式在线预览

#### 3.4.2 互动功能
**功能描述：** 提供用户互动交流功能
**具体要求：**
- 点赞、收藏、转发功能
- 二层评论系统：
  - 一级评论：用户对文档的评论
  - 二级评论：对一级评论的回复
  - 不支持三级评论
- 评论点赞功能
- 所有登录用户可评论

#### 3.4.3 发现功能
**功能描述：** 提供多种文档发现方式
**具体要求：**
- 按文档名搜索功能
- 组合排序功能：
  - 按发布时间排序
  - 按点赞数排序
  - 按收藏数排序
  - 支持时间范围内按点赞排序等复合条件

#### 3.4.4 下载功能
**功能描述：** 支持下载已发布的文档
**具体要求：**
- 直接下载，无限制
- 保持原文件格式

### 3.5 分享功能

#### 3.5.1 分享链接生成
**功能描述：** 为发布的文档生成独立分享链接
**具体要求：**
- 发布成功后自动生成分享链接
- 链接跟随发布状态（取消发布/删除时自动失效）
- 更新发布时链接保持有效

#### 3.5.2 分享链接访问逻辑
**功能描述：** 处理分享链接的访问和登录跳转
**具体要求：**
- 未登录用户点击分享链接跳转到登录页面
- 登录成功后直接跳转到对应文档页面
- 复用现有登录界面，支持新用户注册
- 不影响正常登录流程

## 4. 技术要求和性能指标

### 4.1 数据库设计
- 文档表：文档ID、标题、内容、作者、发布状态、创建时间、更新时间、摘要等
- 文件夹表：文件夹ID、名称、父级ID、层级等
- 评论表：评论ID、文档ID、用户ID、内容、父评论ID、点赞数等
- 互动表：点赞、收藏、转发记录

### 4.2 文件存储
- 支持MD和PDF文件存储
- 文件大小和格式验证
- 文件访问权限控制

### 4.3 性能要求
- 文档列表加载时间不超过2秒
- 支持大文档的在线预览
- 评论和互动操作实时响应

## 5. 界面交互说明

### 5.1 设计风格
**现代极简风格**（延续现有平台风格）（尽量不用蓝色相关）
- **配色方案**：纯白背景 + 深灰色文字(#333) + 天浅蓝色、浅荧绿色
- **布局特点**：大量留白，宽松的间距，呼吸感强
- **卡片设计**：简洁的白色卡片，轻微圆角(8px)，细微阴影
- **按钮风格**：圆角按钮，不用蓝色填充，白色文字，hover时轻微变深
- **字体排版**：无衬线字体，层次分明的字号体系

### 5.2 页面布局
- **文档管理**：左侧文件夹树 + 右侧文档列表
- **技术广场**：顶部搜索和排序 + 文档列表 + 文档详情
- **MD编辑器**：分屏布局（左编辑右预览）或全页预览
- **文档详情**：居中布局，优化阅读体验

### 5.3 交互细节
- 所有按钮hover效果
- 卡片点击反馈效果
- 预览模式切换动画
- 评论展开/收起动画

## 6. 测试验收标准

### 6.1 功能测试
- 文档创建、编辑、发布流程完整
- AI审核机制正常工作
- 分享链接生成和访问正常
- 评论和互动功能正常
- 搜索和排序功能准确
- MD编辑器预览功能正常
- AI优化功能正常工作

### 6.2 安全测试
- 文件格式验证有效
- 内容审核机制可靠
- 用户权限控制正确

### 6.3 用户体验测试
- 界面风格与现有平台保持一致
- 操作流程直观易懂
- 响应速度满足要求

## 7. 项目里程碑和交付物

### 7.1 开发优先级
**第一阶段：** 个人文档管理（创建、编辑、文件夹管理）
**第二阶段：** MD编辑器增强（AI优化、预览功能）
**第三阶段：** AI审核系统和发布功能
**第四阶段：** 技术广场基础功能（展示、搜索、排序）
**第五阶段：** 互动功能（评论、点赞、收藏）
**第六阶段：** 分享功能和链接跳转逻辑

### 7.2 交付物
- 完整的文档管理系统
- 技术广场社区平台
- AI审核接口文档
- AI优化功能接口文档
- 用户操作指南
- 设计规范文档

---

以上就是完整的文档管理与技术广场产品需求文档。所有功能都基于我们的深度对话确认，采用现代极简风格与现有平台保持一致，确保需求清晰、完整、可执行。