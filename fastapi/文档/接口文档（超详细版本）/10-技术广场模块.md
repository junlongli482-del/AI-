# ğŸ“˜ æ›´æ–°åçš„æŠ€æœ¯å¹¿åœºæ¨¡å—æ¥å£æ–‡æ¡£

**æ–‡ä»¶è·¯å¾„**ï¼š`# ğŸ“˜ 10-æŠ€æœ¯å¹¿åœºæ¨¡å—.md`

```markdown
# ğŸ“˜ 10-æŠ€æœ¯å¹¿åœºæ¨¡å—.md

> **æ¨¡å—è·¯å¾„**ï¼š`/api/v2/tech_square`  
> **è®¤è¯è¦æ±‚**ï¼šâŒ æ— éœ€è®¤è¯ï¼ˆå…¬å¼€è®¿é—®ï¼‰  
> **æ¥å£æ•°é‡**ï¼š12ä¸ª  
> **ğŸ†• æ›´æ–°å†…å®¹**ï¼šæ‰€æœ‰æ¥å£è¿”å›æ•°æ®ç°å·²åŒ…å«ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨æˆ·åå’Œæ˜µç§°ï¼‰

---

## ğŸ” æ¥å£æ€»è§ˆ

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | è®¤è¯ |
|------|------|------|------|------|
| æ¨¡å—æµ‹è¯• | GET | `/test` | æ¨¡å—å¥åº·æ£€æŸ¥ | âŒ |
| è·å–æ–‡æ¡£åˆ—è¡¨ | GET | `/documents` | åˆ†é¡µè·å–å·²å‘å¸ƒæ–‡æ¡£ ğŸ†• | âŒ |
| è·å–æ–‡æ¡£è¯¦æƒ… | GET | `/documents/{document_id}` | è·å–å•ä¸ªæ–‡æ¡£è¯¦æƒ… ğŸ†• | âŒ |
| æœç´¢æ–‡æ¡£ | GET | `/search` | æ™ºèƒ½æœç´¢æ–‡æ¡£ ğŸ†• | âŒ |
| åˆ†ç±»ç»Ÿè®¡ | GET | `/category-stats` | è·å–åˆ†ç±»ç»Ÿè®¡ä¿¡æ¯ | âŒ |
| çƒ­é—¨æ–‡æ¡£ | GET | `/hot-documents` | è·å–çƒ­é—¨æ–‡æ¡£åˆ—è¡¨ ğŸ†• | âŒ |
| æœ€æ–°æ–‡æ¡£ | GET | `/latest-documents` | è·å–æœ€æ–°å‘å¸ƒæ–‡æ¡£ ğŸ†• | âŒ |
| ç»Ÿè®¡ä¿¡æ¯ | GET | `/stats` | è·å–å¹¿åœºç»Ÿè®¡ä¿¡æ¯ | âŒ |
| å¢åŠ æµè§ˆé‡ | POST | `/view/{document_id}` | å¢åŠ æ–‡æ¡£æµè§ˆé‡ | âŒ |
| ä¸‹è½½æ–‡æ¡£æ–‡ä»¶ | GET | `/documents/{document_id}/download` | ä¸‹è½½æ–‡æ¡£æ–‡ä»¶ï¼ˆPDF/MDï¼‰ | âŒ |
| æµå¼ä¼ è¾“æ–‡æ¡£ | GET | `/documents/{document_id}/stream` | æµå¼ä¼ è¾“æ–‡æ¡£ï¼ˆPDFé¢„è§ˆï¼‰ | âŒ |
| è·å–æ–‡ä»¶ä¿¡æ¯ | GET | `/documents/{document_id}/info` | è·å–æ–‡æ¡£æ–‡ä»¶ä¿¡æ¯ | âŒ |

---

## ğŸ“‹ æ¥å£è¯¦æƒ…

### 1. æ¨¡å—æµ‹è¯•

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/test
```

**æˆåŠŸå“åº” (200)**
```json
{
  "status": "success",
  "message": "Tech Squareæ¨¡å—è¿è¡Œæ­£å¸¸",
  "module": "tech_square",
  "version": "v2"
}
```

---

### 2. è·å–æ–‡æ¡£åˆ—è¡¨ ğŸ†•

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/documents?page=1&size=20&search=FastAPI&file_type=md&time_filter=week&sort_by=popular
```

**æŸ¥è¯¢å‚æ•°**
- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼Œæœ€å°1ï¼‰
- `size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼ŒèŒƒå›´1-100ï¼‰
- `search`: æœç´¢å…³é”®è¯ï¼ˆå¯é€‰ï¼Œæœ€å¤§100å­—ç¬¦ï¼‰
- `file_type`: æ–‡ä»¶ç±»å‹ç­›é€‰ï¼ˆå¯é€‰ï¼š`md`ã€`pdf`ï¼‰
- `time_filter`: æ—¶é—´ç­›é€‰ï¼ˆå¯é€‰ï¼š`today`ã€`week`ã€`month`ï¼‰
- `sort_by`: æ’åºæ–¹å¼ï¼ˆå¯é€‰ï¼š`latest`ã€`popular`ã€`recommended`ï¼‰

**æ’åºè¯´æ˜**
- `latest`: æŒ‰å‘å¸ƒæ—¶é—´å€’åºï¼ˆé»˜è®¤ï¼‰
- `popular`: æŒ‰æµè§ˆé‡å€’åº
- `recommended`: ç»¼åˆæ¨èï¼ˆæœ€è¿‘3å¤©æ–‡æ¡£+æµè§ˆé‡æƒé‡ï¼‰

**ğŸ†• æˆåŠŸå“åº” (200) - ç°å·²åŒ…å«ç”¨æˆ·ä¿¡æ¯**
```json
{
  "documents": [
    {
      "id": 1,
      "title": "FastAPIå¼€å‘æŒ‡å—",
      "summary": "FastAPIæ¡†æ¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹",
      "file_type": "md",
      "user_id": 1,
      "username": "abc",           // ğŸ†• æ–°å¢ï¼šç”¨æˆ·å
      "nickname": "å°æ˜",          // ğŸ†• æ–°å¢ï¼šç”¨æˆ·æ˜µç§°
      "publish_time": "2024-01-01T10:00:00",
      "view_count": 1250,
      "is_featured": true
    }
  ],
  "total": 156,
  "page": 1,
  "size": 20,
  "total_pages": 8,
  "has_next": true,
  "has_prev": false
}
```

**ğŸ¯ ç”¨æˆ·ä¿¡æ¯å­—æ®µè¯´æ˜**
- `username`: ç”¨æˆ·ç™»å½•åï¼Œå¿…å¡«å­—æ®µ
- `nickname`: ç”¨æˆ·æ˜µç§°ï¼Œå¯é€‰å­—æ®µï¼ˆå¦‚æœç”¨æˆ·æœªè®¾ç½®æ˜µç§°åˆ™ä¸ºnullï¼‰

---

### 3. è·å–æ–‡æ¡£è¯¦æƒ… ğŸ†•

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/documents/{document_id}
```

**ğŸ†• æˆåŠŸå“åº” (200) - ç°å·²åŒ…å«ç”¨æˆ·ä¿¡æ¯**
```json
{
  "id": 1,
  "title": "FastAPIå¼€å‘æŒ‡å—",
  "content": "# FastAPIå¼€å‘æŒ‡å—\n\nè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„FastAPIå¼€å‘æ•™ç¨‹...",
  "summary": "FastAPIæ¡†æ¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹",
  "file_type": "md",
  "file_path": "/uploads/documents/fastapi-guide.md",
  "user_id": 1,
  "username": "abc",           // ğŸ†• æ–°å¢ï¼šç”¨æˆ·å
  "nickname": "å°æ˜",          // ğŸ†• æ–°å¢ï¼šç”¨æˆ·æ˜µç§°
  "publish_time": "2024-01-01T10:00:00",
  "view_count": 1250,
  "is_featured": true
}
```

**é”™è¯¯å“åº”**
```json
// 404 - æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ
{
  "detail": "æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ"
}
```

---

### 4. æœç´¢æ–‡æ¡£ ğŸ†•

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/search?keyword=FastAPI&page=1&size=20&file_type=md
```

**æŸ¥è¯¢å‚æ•°**
- `keyword`: æœç´¢å…³é”®è¯ï¼ˆå¿…å¡«ï¼Œ1-100å­—ç¬¦ï¼‰
- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼ŒèŒƒå›´1-50ï¼‰
- `file_type`: æ–‡ä»¶ç±»å‹ç­›é€‰ï¼ˆå¯é€‰ï¼š`md`ã€`pdf`ï¼‰

**æœç´¢èŒƒå›´**
- æ–‡æ¡£æ ‡é¢˜åŒ¹é…ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
- æ–‡æ¡£æ‘˜è¦å†…å®¹åŒ¹é…

**ğŸ†• æˆåŠŸå“åº” (200) - ç°å·²åŒ…å«ç”¨æˆ·ä¿¡æ¯**
```json
{
  "documents": [
    {
      "id": 1,
      "title": "FastAPIå¼€å‘æŒ‡å—",
      "summary": "FastAPIæ¡†æ¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹",
      "file_type": "md",
      "user_id": 1,
      "username": "abc",           // ğŸ†• æ–°å¢ï¼šç”¨æˆ·å
      "nickname": "å°æ˜",          // ğŸ†• æ–°å¢ï¼šç”¨æˆ·æ˜µç§°
      "publish_time": "2024-01-01T10:00:00",
      "view_count": 1250,
      "is_featured": true
    }
  ],
  "total": 25,
  "page": 1,
  "size": 20,
  "total_pages": 2,
  "has_next": true,
  "has_prev": false
}
```

---

### 5. åˆ†ç±»ç»Ÿè®¡

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/category-stats
```

**æˆåŠŸå“åº” (200)**
```json
{
  "md_count": 128,
  "pdf_count": 45,
  "total_count": 173
}
```

---

### 6. çƒ­é—¨æ–‡æ¡£ ğŸ†•

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/hot-documents?limit=10
```

**æŸ¥è¯¢å‚æ•°**
- `limit`: è¿”å›æ•°é‡ï¼ˆé»˜è®¤10ï¼ŒèŒƒå›´1-50ï¼‰

**ğŸ†• æˆåŠŸå“åº” (200) - ç°å·²åŒ…å«ç”¨æˆ·ä¿¡æ¯**
```json
{
  "documents": [
    {
      "id": 1,
      "title": "FastAPIå¼€å‘æŒ‡å—",
      "summary": "FastAPIæ¡†æ¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹",
      "file_type": "md",
      "user_id": 1,
      "username": "abc",           // ğŸ†• æ–°å¢ï¼šç”¨æˆ·å
      "nickname": "å°æ˜",          // ğŸ†• æ–°å¢ï¼šç”¨æˆ·æ˜µç§°
      "publish_time": "2024-01-01T10:00:00",
      "view_count": 1250,
      "is_featured": true
    }
  ]
}
```

---

### 7. æœ€æ–°æ–‡æ¡£ ğŸ†•

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/latest-documents?limit=10
```

**æŸ¥è¯¢å‚æ•°**
- `limit`: è¿”å›æ•°é‡ï¼ˆé»˜è®¤10ï¼ŒèŒƒå›´1-50ï¼‰

**ğŸ†• æˆåŠŸå“åº” (200) - ç°å·²åŒ…å«ç”¨æˆ·ä¿¡æ¯**
```json
{
  "documents": [
    {
      "id": 2,
      "title": "Vue3ç»„åˆå¼APIè¯¦è§£",
      "summary": "Vue3æ–°ç‰¹æ€§å®Œå…¨æŒ‡å—",
      "file_type": "md",
      "user_id": 2,
      "username": "developer",     // ğŸ†• æ–°å¢ï¼šç”¨æˆ·å
      "nickname": "å‰ç«¯å¼€å‘è€…",     // ğŸ†• æ–°å¢ï¼šç”¨æˆ·æ˜µç§°
      "publish_time": "2024-01-02T15:30:00",
      "view_count": 89,
      "is_featured": false
    }
  ]
}
```

---

### 8. ç»Ÿè®¡ä¿¡æ¯

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/stats
```

**æˆåŠŸå“åº” (200)**
```json
{
  "total_documents": 173,
  "total_views": 25680,
  "today_published": 5,
  "featured_count": 12,
  "category_stats": {
    "md_count": 128,
    "pdf_count": 45,
    "total_count": 173
  }
}
```

---

### 9. å¢åŠ æµè§ˆé‡

**æ¥å£ä¿¡æ¯**
```
POST /api/v2/tech_square/view/{document_id}
```

**ä½¿ç”¨åœºæ™¯**
å‰ç«¯ç”¨æˆ·è®¿é—®æ–‡æ¡£è¯¦æƒ…é¡µæ—¶è°ƒç”¨ï¼Œç”¨äºç»Ÿè®¡æµè§ˆé‡

**æˆåŠŸå“åº” (200)**
```json
{
  "status": "success",
  "message": "æµè§ˆé‡å·²å¢åŠ "
}
```

**é”™è¯¯å“åº”**
```json
// 404 - æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ
{
  "detail": "æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ"
}
```

---

### 10. ä¸‹è½½æ–‡æ¡£æ–‡ä»¶

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/documents/{document_id}/download?preview=false
```

**æŸ¥è¯¢å‚æ•°**
- `preview`: æ˜¯å¦ä¸ºé¢„è§ˆæ¨¡å¼ï¼ˆå¯é€‰ï¼Œé»˜è®¤falseï¼‰
  - `true`: æµè§ˆå™¨å†…é¢„è§ˆï¼ˆé€‚ç”¨äºPDFï¼‰
  - `false`: å¼ºåˆ¶ä¸‹è½½æ–‡ä»¶

**åŠŸèƒ½ç‰¹ç‚¹**
- âœ… **æ— éœ€è®¤è¯**ï¼šå…¬å¼€è®¿é—®å·²å‘å¸ƒæ–‡æ¡£
- âœ… **æ”¯æŒPDFå’ŒMarkdownæ–‡ä»¶ä¸‹è½½**
- âœ… **è‡ªåŠ¨å¤„ç†ä¸­æ–‡æ–‡ä»¶åç¼–ç **
- âœ… **æ”¯æŒé¢„è§ˆå’Œä¸‹è½½ä¸¤ç§æ¨¡å¼**
- âœ… **å®‰å…¨çš„æ–‡ä»¶è®¿é—®æ§åˆ¶**ï¼ˆåªèƒ½è®¿é—®å·²å‘å¸ƒæ–‡æ¡£ï¼‰

**æˆåŠŸå“åº” (200)**
```
Content-Type: application/pdf | text/markdown; charset=utf-8
Content-Length: 130343
Content-Disposition: attachment; filename*=UTF-8''%E6%96%87%E6%A1%A3%E6%A0%87%E9%A2%98.pdf

[æ–‡ä»¶äºŒè¿›åˆ¶æ•°æ®]
```

**é”™è¯¯å“åº”**
```json
// 404 - æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ
{
  "detail": "æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ"
}

// 404 - æ–‡ä»¶ä¸å­˜åœ¨
{
  "detail": "æ–‡æ¡£æ²¡æœ‰å…³è”çš„æ–‡ä»¶"
}

// 404 - ç‰©ç†æ–‡ä»¶ä¸å­˜åœ¨
{
  "detail": "æ–‡ä»¶ä¸å­˜åœ¨"
}
```

---

### 11. æµå¼ä¼ è¾“æ–‡æ¡£

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/documents/{document_id}/stream
```

**åŠŸèƒ½ç‰¹ç‚¹**
- âœ… **ä¸“é—¨ä¼˜åŒ–PDFé¢„è§ˆä½“éªŒ**
- âœ… **åˆ†å—ä¼ è¾“ï¼Œæ”¯æŒå¤§æ–‡ä»¶**ï¼ˆ8KB chunksï¼‰
- âœ… **æµè§ˆå™¨è‡ªåŠ¨é€‰æ‹©PDFé˜…è¯»å™¨**
- âœ… **æ”¯æŒæ–­ç‚¹ç»­ä¼ **ï¼ˆAccept-Rangesï¼‰
- âœ… **æ— éœ€è®¤è¯**ï¼šå…¬å¼€è®¿é—®å·²å‘å¸ƒæ–‡æ¡£

**æˆåŠŸå“åº” (200)**
```
Content-Type: application/pdf | text/markdown; charset=utf-8
Content-Length: 130343
Content-Disposition: inline; filename*=UTF-8''%E6%96%87%E6%A1%A3%E6%A0%87%E9%A2%98.pdf
Accept-Ranges: bytes

[æ–‡ä»¶æµæ•°æ®]
```

---

### 12. è·å–æ–‡æ¡£æ–‡ä»¶ä¿¡æ¯

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/documents/{document_id}/info
```

**åŠŸèƒ½ç‰¹ç‚¹**
- âœ… **è·å–æ–‡ä»¶å…ƒä¿¡æ¯ï¼Œä¸ä¸‹è½½å†…å®¹**
- âœ… **æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§**
- âœ… **éªŒè¯æ–‡ä»¶å¤§å°åŒ¹é…**
- âœ… **æä¾›MIMEç±»å‹ä¿¡æ¯**
- âœ… **æ— éœ€è®¤è¯**ï¼šå…¬å¼€è®¿é—®å·²å‘å¸ƒæ–‡æ¡£

**æˆåŠŸå“åº” (200)**
```json
{
  "document_id": 78,
  "title": "2025.9.22å·¥ä½œè®¡åˆ’",
  "file_type": "pdf",
  "file_size": 112512,
  "has_file": true,
  "file_path": "/path/to/file.pdf",
  "safe_filename": "2025.9.22å·¥ä½œè®¡åˆ’.pdf",
  "file_exists": true,
  "original_filename": "2025.9.22å·¥ä½œè®¡åˆ’.pdf",
  "actual_file_size": 112512,
  "mime_type": "application/pdf",
  "size_match": true
}
```

---

## ğŸš¨ é”™è¯¯ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ | å¸¸è§åŸå›  |
|--------|------|----------|
| 404 | èµ„æºä¸å­˜åœ¨ | æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒã€æ–‡ä»¶ä¸å­˜åœ¨ |
| 422 | æ•°æ®éªŒè¯å¤±è´¥ | å‚æ•°æ ¼å¼é”™è¯¯ã€è¶…å‡ºèŒƒå›´ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æ•°æ®åº“è¿æ¥å¤±è´¥ã€æ–‡ä»¶ç³»ç»Ÿé”™è¯¯ã€ç³»ç»Ÿå¼‚å¸¸ |

---

## ğŸ’¡ ä½¿ç”¨è¯´æ˜

### æ–‡æ¡£çŠ¶æ€
- **åªæ˜¾ç¤ºå·²å‘å¸ƒæ–‡æ¡£**ï¼šæ‰€æœ‰æ¥å£åªè¿”å›çŠ¶æ€ä¸º`published`çš„æ–‡æ¡£
- **å®æ—¶æ•°æ®**ï¼šæµè§ˆé‡ã€ç»Ÿè®¡ä¿¡æ¯å®æ—¶æ›´æ–°

### ğŸ†• ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤º
- **ç”¨æˆ·å (username)**ï¼šç”¨æˆ·çš„ç™»å½•åï¼Œå¿…å¡«å­—æ®µï¼Œå§‹ç»ˆå­˜åœ¨
- **æ˜µç§° (nickname)**ï¼šç”¨æˆ·çš„æ˜¾ç¤ºæ˜µç§°ï¼Œå¯é€‰å­—æ®µ
  - å¦‚æœç”¨æˆ·è®¾ç½®äº†æ˜µç§°ï¼Œä¼˜å…ˆæ˜¾ç¤ºæ˜µç§°
  - å¦‚æœç”¨æˆ·æœªè®¾ç½®æ˜µç§°ï¼Œè¯¥å­—æ®µä¸º `null`ï¼Œå‰ç«¯å¯æ˜¾ç¤ºç”¨æˆ·åä½œä¸ºå¤‡é€‰

### æ–‡ä»¶è®¿é—®åŠŸèƒ½
- **ä¸‰ç§è®¿é—®æ–¹å¼**ï¼š
  - `/download`: é€šç”¨ä¸‹è½½ï¼Œæ”¯æŒé¢„è§ˆ/ä¸‹è½½æ¨¡å¼åˆ‡æ¢
  - `/stream`: PDFé¢„è§ˆä¼˜åŒ–ï¼Œæ¨èç”¨äºPDFæ–‡ä»¶
  - `/info`: è·å–æ–‡ä»¶å…ƒæ•°æ®ï¼Œä¸ä¸‹è½½å†…å®¹
- **ä¸­æ–‡æ–‡ä»¶åæ”¯æŒ**ï¼šä½¿ç”¨RFC 5987æ ‡å‡†ç¼–ç 
- **å®‰å…¨æ§åˆ¶**ï¼šåªèƒ½è®¿é—®å·²å‘å¸ƒçš„æ–‡æ¡£æ–‡ä»¶
- **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆ†å—ä¼ è¾“ï¼Œæ”¯æŒå¤§æ–‡ä»¶å’Œæ–­ç‚¹ç»­ä¼ 

### æœç´¢åŠŸèƒ½
- **æ™ºèƒ½åŒ¹é…**ï¼šæ”¯æŒæ ‡é¢˜å’Œæ‘˜è¦å†…å®¹æœç´¢
- **æ¨¡ç³ŠæŸ¥è¯¢**ï¼šä½¿ç”¨LIKEæ¨¡å¼åŒ¹é…
- **ç»“æœæ’åº**ï¼šæŒ‰å‘å¸ƒæ—¶é—´å€’åº

### æ’åºç®—æ³•
- **æœ€æ–°æ’åº**ï¼šæŒ‰`publish_time`å€’åº
- **çƒ­é—¨æ’åº**ï¼šæŒ‰`view_count`å€’åº  
- **æ¨èæ’åº**ï¼šæœ€è¿‘3å¤©æ–‡æ¡£è·å¾—100åˆ†åŠ æˆï¼Œç»¼åˆæµè§ˆé‡æ’åº

### åˆ†é¡µæœºåˆ¶
- **é¡µç ä»1å¼€å§‹**
- **è‡ªåŠ¨è®¡ç®—æ€»é¡µæ•°**
- **æä¾›å‰åé¡µåˆ¤æ–­**

### æ—¶é—´ç­›é€‰
- **ä»Šæ—¥**ï¼šå½“å¤©0ç‚¹è‡³å½“å‰æ—¶é—´
- **æœ¬å‘¨**ï¼šæœ€è¿‘7å¤©
- **æœ¬æœˆ**ï¼šæœ€è¿‘30å¤©

---

## ğŸ¯ å‰ç«¯é›†æˆå»ºè®®

### é¦–é¡µå±•ç¤º
```javascript
// è·å–çƒ­é—¨æ–‡æ¡£ï¼ˆåŒ…å«ä½œè€…ä¿¡æ¯ï¼‰
GET /api/v2/tech_square/hot-documents?limit=6

// è·å–æœ€æ–°æ–‡æ¡£ï¼ˆåŒ…å«ä½œè€…ä¿¡æ¯ï¼‰
GET /api/v2/tech_square/latest-documents?limit=6

// è·å–ç»Ÿè®¡ä¿¡æ¯
GET /api/v2/tech_square/stats
```

### æ–‡æ¡£åˆ—è¡¨é¡µ
```javascript
// åˆ†é¡µåˆ—è¡¨ï¼ˆåŒ…å«ä½œè€…ä¿¡æ¯ï¼‰
GET /api/v2/tech_square/documents?page=1&size=20&sort_by=latest

// ç­›é€‰åŠŸèƒ½
GET /api/v2/tech_square/documents?file_type=md&time_filter=week
```

### æœç´¢é¡µé¢
```javascript
// æœç´¢æ–‡æ¡£ï¼ˆåŒ…å«ä½œè€…ä¿¡æ¯ï¼‰
GET /api/v2/tech_square/search?keyword=FastAPI&page=1&size=20
```

### æ–‡æ¡£è¯¦æƒ…é¡µ
```javascript
// è·å–è¯¦æƒ…ï¼ˆåŒ…å«ä½œè€…ä¿¡æ¯ï¼‰
GET /api/v2/tech_square/documents/1

// å¢åŠ æµè§ˆé‡
POST /api/v2/tech_square/view/1

// æ–‡ä»¶è®¿é—®åŠŸèƒ½
// 1. PDFé¢„è§ˆï¼ˆæ¨èï¼‰
function previewPDF(documentId) {
    const url = `http://localhost:8100/api/v2/tech_square/documents/${documentId}/stream`
    window.open(url, '_blank')
}

// 2. æ–‡ä»¶ä¸‹è½½
async function downloadFile(documentId) {
    const response = await fetch(`http://localhost:8100/api/v2/tech_square/documents/${documentId}/download`)
    const blob = await response.blob()
    const url = window.URL.createObjectURL(blob)
    const a = document.createElement('a')
    a.href = url
    a.download = 'document.pdf'
    a.click()
}
```

### ğŸ†• ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºå»ºè®®

```javascript
// æ˜¾ç¤ºæ–‡æ¡£ä½œè€…ä¿¡æ¯
function renderAuthorInfo(document) {
    const displayName = document.nickname || document.username;
    const authorInfo = `
        <div class="author-info">
            <span class="author-name">${displayName}</span>
            <span class="author-username">@${document.username}</span>
        </div>
    `;
    return authorInfo;
}

// æ–‡æ¡£å¡ç‰‡ç»„ä»¶ç¤ºä¾‹
function renderDocumentCard(document) {
    const authorName = document.nickname || document.username;
    
    return `
        <div class="document-card">
            <h3>${document.title}</h3>
            <p>${document.summary}</p>
            <div class="document-meta">
                <span class="author">ğŸ‘¤ ${authorName}</span>
                <span class="views">ğŸ‘ï¸ ${document.view_count}</span>
                <span class="time">ğŸ“… ${formatDate(document.publish_time)}</span>
                ${document.is_featured ? '<span class="featured">â­ ç²¾é€‰</span>' : ''}
            </div>
        </div>
    `;
}

// ä½œè€…ä¿¡æ¯æ‚¬æµ®æç¤º
function showAuthorTooltip(document) {
    return `
        <div class="author-tooltip">
            <div>ç”¨æˆ·å: ${document.username}</div>
            ${document.nickname ? `<div>æ˜µç§°: ${document.nickname}</div>` : ''}
            <div>ç”¨æˆ·ID: ${document.user_id}</div>
        </div>
    `;
}
```

---

## ğŸ‰ æ›´æ–°äº®ç‚¹

### âœ… å®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯å±•ç¤º
- **ç”¨æˆ·åæ˜¾ç¤º**ï¼šæ‰€æœ‰æ–‡æ¡£éƒ½åŒ…å«ä½œè€…ç”¨æˆ·å
- **æ˜µç§°æ”¯æŒ**ï¼šä¼˜å…ˆæ˜¾ç¤ºç”¨æˆ·æ˜µç§°ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **çµæ´»æ˜¾ç¤ºç­–ç•¥**ï¼šå‰ç«¯å¯æ ¹æ®æ˜µç§°æ˜¯å¦å­˜åœ¨é€‰æ‹©æ˜¾ç¤ºæ–¹å¼

### âœ… ä¼˜ç§€çš„å‰ç«¯é›†æˆä½“éªŒ
- **æ•°æ®ç»“æ„ä¸€è‡´**ï¼šæ‰€æœ‰è¿”å›æ–‡æ¡£çš„æ¥å£éƒ½åŒ…å«ç”¨æˆ·ä¿¡æ¯
- **å‘åå…¼å®¹**ï¼šä¿ç•™åŸæœ‰çš„`user_id`å­—æ®µ
- **æ˜¾ç¤ºçµæ´»æ€§**ï¼šæ”¯æŒå¤šç§ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºæ–¹æ¡ˆ

### âœ… æ€§èƒ½ä¼˜åŒ–
- **JOINæŸ¥è¯¢ä¼˜åŒ–**ï¼šä¸€æ¬¡æŸ¥è¯¢è·å–æ–‡æ¡£å’Œç”¨æˆ·ä¿¡æ¯
- **ç´¢å¼•æ”¯æŒ**ï¼šæ•°æ®åº“å·²æœ‰ç”¨æˆ·è¡¨ç›¸å…³ç´¢å¼•
- **ç¼“å­˜å‹å¥½**ï¼šç”¨æˆ·ä¿¡æ¯ç›¸å¯¹ç¨³å®šï¼Œé€‚åˆç¼“å­˜

### âœ… å®Œæ•´çš„æ–‡ä»¶è®¿é—®åŠŸèƒ½
- **PDFé¢„è§ˆ**ï¼šæµè§ˆå™¨å†…ç›´æ¥æŸ¥çœ‹ï¼Œæ— éœ€ä¸‹è½½
- **æ–‡ä»¶ä¸‹è½½**ï¼šæ”¯æŒPDFå’ŒMDæ–‡æ¡£ä¸‹è½½  
- **æ–‡ä»¶ä¿¡æ¯**ï¼šæ£€æŸ¥æ–‡ä»¶å¯ç”¨æ€§å’Œå®Œæ•´æ€§
- **ä¸­æ–‡æ–‡ä»¶åå®Œç¾æ”¯æŒ**ï¼šä¸‹è½½çš„æ–‡ä»¶åä¿æŒä¸­æ–‡æ˜¾ç¤º
- **å¤šæµè§ˆå™¨å…¼å®¹**ï¼šChromeã€Firefoxã€Safariã€Edgeå…¨æ”¯æŒ

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.2 ğŸ†• | **æ›´æ–°æ—¶é—´**ï¼š2024-12-19 | **æ¥å£æ€»æ•°**ï¼š12ä¸ª | **ğŸ†• æ–°å¢ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºåŠŸèƒ½**
```

## ğŸ¯ ä¸»è¦æ›´æ–°å†…å®¹

### âœ… ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºåŠŸèƒ½
æ‰€æœ‰è¿”å›æ–‡æ¡£ä¿¡æ¯çš„æ¥å£ç°åœ¨éƒ½åŒ…å«ï¼š
- **username**: ç”¨æˆ·ç™»å½•åï¼ˆå¿…å¡«ï¼‰
- **nickname**: ç”¨æˆ·æ˜µç§°ï¼ˆå¯é€‰ï¼Œæœªè®¾ç½®æ—¶ä¸ºnullï¼‰

### âœ… æ¶‰åŠçš„æ¥å£ï¼ˆ5ä¸ªï¼‰
1. **è·å–æ–‡æ¡£åˆ—è¡¨** - åˆ—è¡¨ä¸­æ¯ä¸ªæ–‡æ¡£éƒ½åŒ…å«ä½œè€…ä¿¡æ¯
2. **è·å–æ–‡æ¡£è¯¦æƒ…** - è¯¦æƒ…é¡µæ˜¾ç¤ºå®Œæ•´ä½œè€…ä¿¡æ¯
3. **æœç´¢æ–‡æ¡£** - æœç´¢ç»“æœåŒ…å«ä½œè€…ä¿¡æ¯
4. **çƒ­é—¨æ–‡æ¡£** - çƒ­é—¨æ–‡æ¡£åˆ—è¡¨åŒ…å«ä½œè€…ä¿¡æ¯
5. **æœ€æ–°æ–‡æ¡£** - æœ€æ–°æ–‡æ¡£åˆ—è¡¨åŒ…å«ä½œè€…ä¿¡æ¯

### âœ… å‰ç«¯é›†æˆå»ºè®®
- æä¾›äº†å®Œæ•´çš„JavaScriptç¤ºä¾‹ä»£ç 
- åŒ…å«ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºçš„æœ€ä½³å®è·µ
- æ”¯æŒæ˜µç§°ä¼˜å…ˆæ˜¾ç¤ºç­–ç•¥
- æä¾›ä½œè€…ä¿¡æ¯æ‚¬æµ®æç¤ºæ–¹æ¡ˆ

### âœ… å‘åå…¼å®¹
- ä¿ç•™åŸæœ‰çš„`user_id`å­—æ®µ
- æ–°å¢å­—æ®µä¸å½±å“ç°æœ‰å‰ç«¯ä»£ç 
- æ¸è¿›å¼å‡çº§æ”¯æŒ

ç°åœ¨æŠ€æœ¯å¹¿åœºçš„æ¥å£æ–‡æ¡£å·²ç»å®Œå…¨æ›´æ–°ï¼å‰ç«¯å¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨`username`å’Œ`nickname`å­—æ®µæ¥æ˜¾ç¤ºæ–‡æ¡£ä½œè€…ä¿¡æ¯ï¼Œå¤§å¤§æå‡ç”¨æˆ·ä½“éªŒã€‚ğŸ‰