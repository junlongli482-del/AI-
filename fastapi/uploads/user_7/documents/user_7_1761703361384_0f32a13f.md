 # ğŸ“˜ 04-å¯†ç ç®¡ç†æ¨¡å—.md

> **æ¨¡å—è·¯å¾„**ï¼š`/api/v1/password_manager`  
> **è®¤è¯è¦æ±‚**ï¼šâœ… éœ€è¦Bearer Token  
> **æ¥å£æ•°é‡**ï¼š4ä¸ª

---

## ğŸ” æ¥å£æ€»è§ˆ

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | è®¤è¯ |
|------|------|------|------|------|
| ä¿®æ”¹å¯†ç  | POST | `/change-password` | ç”¨æˆ·ä¿®æ”¹å¯†ç  | âœ… |
| å¯†ç å¼ºåº¦æ£€æŸ¥ | POST | `/check-strength` | æ£€æŸ¥å¯†ç å¼ºåº¦ | âŒ |
| è·å–ç”¨æˆ·ä¿¡æ¯ | GET | `/user-info` | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | âœ… |
| æ¨¡å—æµ‹è¯• | GET | `/test` | æµ‹è¯•æ¨¡å—çŠ¶æ€ | âŒ |

---

## ğŸ“‹ æ¥å£è¯¦æƒ…

### 1. ä¿®æ”¹å¯†ç 

**æ¥å£ä¿¡æ¯**
```
POST /api/v1/password_manager/change-password
Content-Type: application/json
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°**
```json
{
  "current_password": "string",     // å½“å‰å¯†ç 
  "new_password": "string",         // æ–°å¯†ç ï¼ˆæœ€å°‘8ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—ï¼‰
  "confirm_password": "string"      // ç¡®è®¤æ–°å¯†ç 
}
```

**å‚æ•°éªŒè¯**
- `current_password`: å¿…å¡«ï¼Œæœ€å°‘1ä½
- `new_password`: å¿…å¡«ï¼Œ8-128ä½ï¼Œå¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—
- `confirm_password`: å¿…å¡«ï¼Œå¿…é¡»ä¸new_passwordä¸€è‡´

**æˆåŠŸå“åº” (200)**
```json
{
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ",
  "success": true,
  "user_info": {
    "id": 1,
    "username": "abc",
    "display_name": "abc"
  }
}
```

**é”™è¯¯å“åº”**
```json
// 400 - å‚æ•°é”™è¯¯
{
  "detail": "å½“å‰å¯†ç é”™è¯¯"
}

// 400 - æ–°å¯†ç ä¸å½“å‰å¯†ç ç›¸åŒ
{
  "detail": "æ–°å¯†ç ä¸èƒ½ä¸å½“å‰å¯†ç ç›¸åŒ"
}

// 422 - éªŒè¯é”™è¯¯
{
  "detail": [
    {
      "loc": ["body", "new_password"],
      "msg": "å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå­—æ¯",
      "type": "value_error"
    }
  ]
}
```

---

### 2. å¯†ç å¼ºåº¦æ£€æŸ¥

**æ¥å£ä¿¡æ¯**
```
POST /api/v1/password_manager/check-strength
Content-Type: application/json
```

**è¯·æ±‚å‚æ•°**
```json
{
  "password": "string"    // è¦æ£€æŸ¥çš„å¯†ç 
}
```

**æˆåŠŸå“åº” (200)**
```json
{
  "is_valid": true,                    // æ˜¯å¦ç¬¦åˆåŸºæœ¬è¦æ±‚
  "strength_level": "å¼º",              // å¼ºåº¦ç­‰çº§ï¼šå¼±/ä¸­/å¼º
  "requirements": {                    // å„é¡¹è¦æ±‚æ£€æŸ¥ç»“æœ
    "min_length": true,                // æœ€å°‘8ä½
    "has_letter": true,                // åŒ…å«å­—æ¯
    "has_number": true,                // åŒ…å«æ•°å­—
    "has_special": false,              // åŒ…å«ç‰¹æ®Šå­—ç¬¦
    "has_upper": true,                 // åŒ…å«å¤§å†™å­—æ¯
    "has_lower": true                  // åŒ…å«å°å†™å­—æ¯
  },
  "suggestions": []                    // æ”¹è¿›å»ºè®®æ•°ç»„
}
```

**å¼±å¯†ç ç¤ºä¾‹å“åº”**
```json
{
  "is_valid": false,
  "strength_level": "å¼±",
  "requirements": {
    "min_length": false,
    "has_letter": true,
    "has_number": false,
    "has_special": false,
    "has_upper": false,
    "has_lower": true
  },
  "suggestions": [
    "å¯†ç é•¿åº¦è‡³å°‘8ä½",
    "æ·»åŠ æ•°å­—",
    "æ·»åŠ ç‰¹æ®Šå­—ç¬¦ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰",
    "æ·»åŠ å¤§å†™å­—æ¯ï¼ˆæ¨èï¼‰"
  ]
}
```

---

### 3. è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£ä¿¡æ¯**
```
GET /api/v1/password_manager/user-info
Authorization: Bearer <token>
```

**æˆåŠŸå“åº” (200)**
```json
{
  "id": 1,
  "username": "abc",
  "email": "abc@example.com",
  "display_name": "abc",
  "created_at": "2024-01-01 10:00:00"
}
```

**é”™è¯¯å“åº”**
```json
// 404 - ç”¨æˆ·ä¸å­˜åœ¨
{
  "detail": "ç”¨æˆ·ä¸å­˜åœ¨"
}
```

---

### 4. æ¨¡å—æµ‹è¯•

**æ¥å£ä¿¡æ¯**
```
GET /api/v1/password_manager/test
```

**æˆåŠŸå“åº” (200)**
```json
{
  "message": "å¯†ç ç®¡ç†æ¨¡å—æ­£å¸¸è¿è¡Œ",
  "module": "password_manager",
  "version": "v1",
  "endpoints": [
    "POST /change-password - ä¿®æ”¹å¯†ç ",
    "POST /check-strength - æ£€æŸ¥å¯†ç å¼ºåº¦",
    "GET /test - æ¨¡å—æµ‹è¯•"
  ],
  "database_status": "æ­£å¸¸ (ç”¨æˆ·æ€»æ•°: 5)"
}
```

---

## ğŸš¨ é”™è¯¯ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ | å¸¸è§åŸå›  |
|--------|------|----------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | å½“å‰å¯†ç é”™è¯¯ã€æ–°å¯†ç ä¸å½“å‰å¯†ç ç›¸åŒ |
| 401 | è®¤è¯å¤±è´¥ | Tokenæ— æ•ˆã€ç”¨æˆ·ä¸å­˜åœ¨æˆ–è¢«ç¦ç”¨ |
| 422 | æ•°æ®éªŒè¯å¤±è´¥ | å¯†ç æ ¼å¼ä¸ç¬¦åˆè¦æ±‚ã€ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æ•°æ®åº“è¿æ¥å¤±è´¥ã€ç³»ç»Ÿå¼‚å¸¸ |

---

## ğŸ’¡ ä½¿ç”¨è¯´æ˜

### å¯†ç è¦æ±‚
- **æœ€å°‘8ä½å­—ç¬¦**
- **å¿…é¡»åŒ…å«å­—æ¯**
- **å¿…é¡»åŒ…å«æ•°å­—**
- **æ¨èåŒ…å«å¤§å°å†™å­—æ¯å’Œç‰¹æ®Šå­—ç¬¦**

### å¼ºåº¦ç­‰çº§
- **å¼±**ï¼šæ»¡è¶³0-2é¡¹è¦æ±‚
- **ä¸­**ï¼šæ»¡è¶³3-4é¡¹è¦æ±‚  
- **å¼º**ï¼šæ»¡è¶³5-6é¡¹è¦æ±‚

### è®¤è¯è¯´æ˜
- ä¿®æ”¹å¯†ç å’Œè·å–ç”¨æˆ·ä¿¡æ¯éœ€è¦ç™»å½•
- å¯†ç å¼ºåº¦æ£€æŸ¥å’Œæ¨¡å—æµ‹è¯•æ— éœ€è®¤è¯
- Tokenæ ¼å¼ï¼š`Authorization: Bearer <your_token>`

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0 | **æ›´æ–°æ—¶é—´**ï¼š2024-12-19 | **æ¥å£æ€»æ•°**ï¼š4ä¸ª ğŸ”
