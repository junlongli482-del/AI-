# ğŸ“˜ 10-æŠ€æœ¯å¹¿åœºæ¨¡å—.md

> **æ¨¡å—è·¯å¾„**ï¼š`/api/v2/tech_square`  
> **è®¤è¯è¦æ±‚**ï¼šâŒ æ— éœ€è®¤è¯ï¼ˆå…¬å¼€è®¿é—®ï¼‰  
> **æ¥å£æ•°é‡**ï¼š8ä¸ª

---

## ğŸ” æ¥å£æ€»è§ˆ

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | è®¤è¯ |
|------|------|------|------|------|
| æ¨¡å—æµ‹è¯• | GET | `/test` | æ¨¡å—å¥åº·æ£€æŸ¥ | âŒ |
| è·å–æ–‡æ¡£åˆ—è¡¨ | GET | `/documents` | åˆ†é¡µè·å–å·²å‘å¸ƒæ–‡æ¡£ | âŒ |
| è·å–æ–‡æ¡£è¯¦æƒ… | GET | `/documents/{document_id}` | è·å–å•ä¸ªæ–‡æ¡£è¯¦æƒ… | âŒ |
| æœç´¢æ–‡æ¡£ | GET | `/search` | æ™ºèƒ½æœç´¢æ–‡æ¡£ | âŒ |
| åˆ†ç±»ç»Ÿè®¡ | GET | `/category-stats` | è·å–åˆ†ç±»ç»Ÿè®¡ä¿¡æ¯ | âŒ |
| çƒ­é—¨æ–‡æ¡£ | GET | `/hot-documents` | è·å–çƒ­é—¨æ–‡æ¡£åˆ—è¡¨ | âŒ |
| æœ€æ–°æ–‡æ¡£ | GET | `/latest-documents` | è·å–æœ€æ–°å‘å¸ƒæ–‡æ¡£ | âŒ |
| ç»Ÿè®¡ä¿¡æ¯ | GET | `/stats` | è·å–å¹¿åœºç»Ÿè®¡ä¿¡æ¯ | âŒ |
| å¢åŠ æµè§ˆé‡ | POST | `/view/{document_id}` | å¢åŠ æ–‡æ¡£æµè§ˆé‡ | âŒ |

---

## ğŸ“‹ æ¥å£è¯¦æƒ…

### 1. æ¨¡å—æµ‹è¯•

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/test
```

**æˆåŠŸå“åº” (200)**
```json
{
  "status": "success",
  "message": "Tech Squareæ¨¡å—è¿è¡Œæ­£å¸¸",
  "module": "tech_square",
  "version": "v2"
}
```

---

### 2. è·å–æ–‡æ¡£åˆ—è¡¨

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/documents?page=1&size=20&search=FastAPI&file_type=md&time_filter=week&sort_by=popular
```

**æŸ¥è¯¢å‚æ•°**
- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼Œæœ€å°1ï¼‰
- `size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼ŒèŒƒå›´1-100ï¼‰
- `search`: æœç´¢å…³é”®è¯ï¼ˆå¯é€‰ï¼Œæœ€å¤§100å­—ç¬¦ï¼‰
- `file_type`: æ–‡ä»¶ç±»å‹ç­›é€‰ï¼ˆå¯é€‰ï¼š`md`ã€`pdf`ï¼‰
- `time_filter`: æ—¶é—´ç­›é€‰ï¼ˆå¯é€‰ï¼š`today`ã€`week`ã€`month`ï¼‰
- `sort_by`: æ’åºæ–¹å¼ï¼ˆå¯é€‰ï¼š`latest`ã€`popular`ã€`recommended`ï¼‰

**æ’åºè¯´æ˜**
- `latest`: æŒ‰å‘å¸ƒæ—¶é—´å€’åºï¼ˆé»˜è®¤ï¼‰
- `popular`: æŒ‰æµè§ˆé‡å€’åº
- `recommended`: ç»¼åˆæ¨èï¼ˆæœ€è¿‘3å¤©æ–‡æ¡£+æµè§ˆé‡æƒé‡ï¼‰

**æˆåŠŸå“åº” (200)**
```json
{
  "documents": [
    {
      "id": 1,
      "title": "FastAPIå¼€å‘æŒ‡å—",
      "summary": "FastAPIæ¡†æ¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹",
      "file_type": "md",
      "user_id": 1,
      "publish_time": "2024-01-01T10:00:00",
      "view_count": 1250,
      "is_featured": true
    }
  ],
  "total": 156,
  "page": 1,
  "size": 20,
  "total_pages": 8,
  "has_next": true,
  "has_prev": false
}
```

---

### 3. è·å–æ–‡æ¡£è¯¦æƒ…

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/documents/{document_id}
```

**æˆåŠŸå“åº” (200)**
```json
{
  "id": 1,
  "title": "FastAPIå¼€å‘æŒ‡å—",
  "content": "# FastAPIå¼€å‘æŒ‡å—\n\nè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„FastAPIå¼€å‘æ•™ç¨‹...",
  "summary": "FastAPIæ¡†æ¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹",
  "file_type": "md",
  "file_path": "/uploads/documents/fastapi-guide.md",
  "user_id": 1,
  "publish_time": "2024-01-01T10:00:00",
  "view_count": 1250,
  "is_featured": true
}
```

**é”™è¯¯å“åº”**
```json
// 404 - æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ
{
  "detail": "æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ"
}
```

---

### 4. æœç´¢æ–‡æ¡£

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/search?keyword=FastAPI&page=1&size=20&file_type=md
```

**æŸ¥è¯¢å‚æ•°**
- `keyword`: æœç´¢å…³é”®è¯ï¼ˆå¿…å¡«ï¼Œ1-100å­—ç¬¦ï¼‰
- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼ŒèŒƒå›´1-50ï¼‰
- `file_type`: æ–‡ä»¶ç±»å‹ç­›é€‰ï¼ˆå¯é€‰ï¼š`md`ã€`pdf`ï¼‰

**æœç´¢èŒƒå›´**
- æ–‡æ¡£æ ‡é¢˜åŒ¹é…ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
- æ–‡æ¡£æ‘˜è¦å†…å®¹åŒ¹é…

**æˆåŠŸå“åº” (200)**
```json
{
  "documents": [
    {
      "id": 1,
      "title": "FastAPIå¼€å‘æŒ‡å—",
      "summary": "FastAPIæ¡†æ¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹",
      "file_type": "md",
      "user_id": 1,
      "publish_time": "2024-01-01T10:00:00",
      "view_count": 1250,
      "is_featured": true
    }
  ],
  "total": 25,
  "page": 1,
  "size": 20,
  "total_pages": 2,
  "has_next": true,
  "has_prev": false
}
```

---

### 5. åˆ†ç±»ç»Ÿè®¡

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/category-stats
```

**æˆåŠŸå“åº” (200)**
```json
{
  "md_count": 128,
  "pdf_count": 45,
  "total_count": 173
}
```

---

### 6. çƒ­é—¨æ–‡æ¡£

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/hot-documents?limit=10
```

**æŸ¥è¯¢å‚æ•°**
- `limit`: è¿”å›æ•°é‡ï¼ˆé»˜è®¤10ï¼ŒèŒƒå›´1-50ï¼‰

**æˆåŠŸå“åº” (200)**
```json
{
  "documents": [
    {
      "id": 1,
      "title": "FastAPIå¼€å‘æŒ‡å—",
      "summary": "FastAPIæ¡†æ¶çš„å®Œæ•´å¼€å‘æ•™ç¨‹",
      "file_type": "md",
      "user_id": 1,
      "publish_time": "2024-01-01T10:00:00",
      "view_count": 1250,
      "is_featured": true
    }
  ]
}
```

---

### 7. æœ€æ–°æ–‡æ¡£

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/latest-documents?limit=10
```

**æŸ¥è¯¢å‚æ•°**
- `limit`: è¿”å›æ•°é‡ï¼ˆé»˜è®¤10ï¼ŒèŒƒå›´1-50ï¼‰

**æˆåŠŸå“åº” (200)**
```json
{
  "documents": [
    {
      "id": 2,
      "title": "Vue3ç»„åˆå¼APIè¯¦è§£",
      "summary": "Vue3æ–°ç‰¹æ€§å®Œå…¨æŒ‡å—",
      "file_type": "md",
      "user_id": 2,
      "publish_time": "2024-01-02T15:30:00",
      "view_count": 89,
      "is_featured": false
    }
  ]
}
```

---

### 8. ç»Ÿè®¡ä¿¡æ¯

**æ¥å£ä¿¡æ¯**
```
GET /api/v2/tech_square/stats
```

**æˆåŠŸå“åº” (200)**
```json
{
  "total_documents": 173,
  "total_views": 25680,
  "today_published": 5,
  "featured_count": 12,
  "category_stats": {
    "md_count": 128,
    "pdf_count": 45,
    "total_count": 173
  }
}
```

---

### 9. å¢åŠ æµè§ˆé‡

**æ¥å£ä¿¡æ¯**
```
POST /api/v2/tech_square/view/{document_id}
```

**ä½¿ç”¨åœºæ™¯**
å‰ç«¯ç”¨æˆ·è®¿é—®æ–‡æ¡£è¯¦æƒ…é¡µæ—¶è°ƒç”¨ï¼Œç”¨äºç»Ÿè®¡æµè§ˆé‡

**æˆåŠŸå“åº” (200)**
```json
{
  "status": "success",
  "message": "æµè§ˆé‡å·²å¢åŠ "
}
```

**é”™è¯¯å“åº”**
```json
// 404 - æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ
{
  "detail": "æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ"
}
```

---

## ğŸš¨ é”™è¯¯ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ | å¸¸è§åŸå›  |
|--------|------|----------|
| 404 | èµ„æºä¸å­˜åœ¨ | æ–‡æ¡£ä¸å­˜åœ¨æˆ–æœªå‘å¸ƒ |
| 422 | æ•°æ®éªŒè¯å¤±è´¥ | å‚æ•°æ ¼å¼é”™è¯¯ã€è¶…å‡ºèŒƒå›´ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æ•°æ®åº“è¿æ¥å¤±è´¥ã€ç³»ç»Ÿå¼‚å¸¸ |

---

## ğŸ’¡ ä½¿ç”¨è¯´æ˜

### æ–‡æ¡£çŠ¶æ€
- **åªæ˜¾ç¤ºå·²å‘å¸ƒæ–‡æ¡£**ï¼šæ‰€æœ‰æ¥å£åªè¿”å›çŠ¶æ€ä¸º`published`çš„æ–‡æ¡£
- **å®æ—¶æ•°æ®**ï¼šæµè§ˆé‡ã€ç»Ÿè®¡ä¿¡æ¯å®æ—¶æ›´æ–°

### æœç´¢åŠŸèƒ½
- **æ™ºèƒ½åŒ¹é…**ï¼šæ”¯æŒæ ‡é¢˜å’Œæ‘˜è¦å†…å®¹æœç´¢
- **æ¨¡ç³ŠæŸ¥è¯¢**ï¼šä½¿ç”¨LIKEæ¨¡å¼åŒ¹é…
- **ç»“æœæ’åº**ï¼šæŒ‰å‘å¸ƒæ—¶é—´å€’åº

### æ’åºç®—æ³•
- **æœ€æ–°æ’åº**ï¼šæŒ‰`publish_time`å€’åº
- **çƒ­é—¨æ’åº**ï¼šæŒ‰`view_count`å€’åº  
- **æ¨èæ’åº**ï¼šæœ€è¿‘3å¤©æ–‡æ¡£è·å¾—100åˆ†åŠ æˆï¼Œç»¼åˆæµè§ˆé‡æ’åº

### åˆ†é¡µæœºåˆ¶
- **é¡µç ä»1å¼€å§‹**
- **è‡ªåŠ¨è®¡ç®—æ€»é¡µæ•°**
- **æä¾›å‰åé¡µåˆ¤æ–­**

### æ—¶é—´ç­›é€‰
- **ä»Šæ—¥**ï¼šå½“å¤©0ç‚¹è‡³å½“å‰æ—¶é—´
- **æœ¬å‘¨**ï¼šæœ€è¿‘7å¤©
- **æœ¬æœˆ**ï¼šæœ€è¿‘30å¤©

---

## ğŸ¯ å‰ç«¯é›†æˆå»ºè®®

### é¦–é¡µå±•ç¤º
```javascript
// è·å–çƒ­é—¨æ–‡æ¡£
GET /api/v2/tech_square/hot-documents?limit=6

// è·å–æœ€æ–°æ–‡æ¡£  
GET /api/v2/tech_square/latest-documents?limit=6

// è·å–ç»Ÿè®¡ä¿¡æ¯
GET /api/v2/tech_square/stats
```

### æ–‡æ¡£åˆ—è¡¨é¡µ
```javascript
// åˆ†é¡µåˆ—è¡¨
GET /api/v2/tech_square/documents?page=1&size=20&sort_by=latest

// ç­›é€‰åŠŸèƒ½
GET /api/v2/tech_square/documents?file_type=md&time_filter=week
```

### æœç´¢é¡µé¢
```javascript
// æœç´¢æ–‡æ¡£
GET /api/v2/tech_square/search?keyword=FastAPI&page=1&size=20
```

### æ–‡æ¡£è¯¦æƒ…é¡µ
```javascript
// è·å–è¯¦æƒ…
GET /api/v2/tech_square/documents/1

// å¢åŠ æµè§ˆé‡
POST /api/v2/tech_square/view/1
```

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0 | **æ›´æ–°æ—¶é—´**ï¼š2024-12-19 | **æ¥å£æ€»æ•°**ï¼š8ä¸ª ğŸ›ï¸
