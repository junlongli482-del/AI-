 # ğŸ“˜ 11-äº’åŠ¨åŠŸèƒ½æ¨¡å— - å‰ç«¯æ¥å£æ–‡æ¡£

> **æ¨¡å—è·¯å¾„**ï¼š`/api/v2/interaction`  
> **æ¥å£æ•°é‡**ï¼š11ä¸ª  
> **è®¤è¯è¦æ±‚**ï¼šâœ… å¤§éƒ¨åˆ†éœ€è¦ç™»å½•

---

## ğŸ”— æ¥å£åˆ—è¡¨

### ç‚¹èµåŠŸèƒ½ (2ä¸ª)
1. **åˆ‡æ¢ç‚¹èµçŠ¶æ€** - `POST /documents/{document_id}/like`
2. **è·å–ç‚¹èµçŠ¶æ€** - `GET /documents/{document_id}/like-status` âŒ æ— éœ€è®¤è¯

### æ”¶è—åŠŸèƒ½ (3ä¸ª)
3. **åˆ‡æ¢æ”¶è—çŠ¶æ€** - `POST /documents/{document_id}/favorite`
4. **è·å–æ”¶è—çŠ¶æ€** - `GET /documents/{document_id}/favorite-status` âŒ æ— éœ€è®¤è¯
5. **æˆ‘çš„æ”¶è—åˆ—è¡¨** - `GET /my-favorites`

### è¯„è®ºåŠŸèƒ½ (4ä¸ª)
6. **åˆ›å»ºè¯„è®º/å›å¤** - `POST /documents/{document_id}/comments`
7. **è·å–è¯„è®ºåˆ—è¡¨** - `GET /documents/{document_id}/comments` âŒ æ— éœ€è®¤è¯
8. **æ›´æ–°è¯„è®ºå†…å®¹** - `PUT /comments/{comment_id}`
9. **åˆ é™¤è¯„è®º** - `DELETE /comments/{comment_id}`

### ç»Ÿè®¡åŠŸèƒ½ (2ä¸ª)
10. **æ–‡æ¡£äº’åŠ¨ç»Ÿè®¡** - `GET /documents/{document_id}/stats` âŒ æ— éœ€è®¤è¯
11. **æˆ‘çš„äº’åŠ¨ç»Ÿè®¡** - `GET /my-stats`

---

## ğŸ“‹ æ¥å£è¯¦æƒ…

### 1. åˆ‡æ¢ç‚¹èµçŠ¶æ€

**æˆåŠŸå“åº” (200)**
```json
{
  "success": true,
  "message": "ç‚¹èµæˆåŠŸ",        // æˆ– "å–æ¶ˆç‚¹èµæˆåŠŸ"
  "is_liked": true,
  "like_count": 25
}
```

### 2. è·å–ç‚¹èµçŠ¶æ€ï¼ˆå…¬å¼€æ¥å£ï¼‰

**æˆåŠŸå“åº” (200)**
```json
{
  "is_liked": true,            // æœªç™»å½•æ—¶ä¸ºfalse
  "like_count": 25
}
```

### 3. åˆ‡æ¢æ”¶è—çŠ¶æ€

**æˆåŠŸå“åº” (200)**
```json
{
  "success": true,
  "message": "æ”¶è—æˆåŠŸ",        // æˆ– "å–æ¶ˆæ”¶è—æˆåŠŸ"
  "is_favorited": true,
  "favorite_count": 15
}
```

### 4. è·å–æ”¶è—çŠ¶æ€ï¼ˆå…¬å¼€æ¥å£ï¼‰

**æˆåŠŸå“åº” (200)**
```json
{
  "is_favorited": true,        // æœªç™»å½•æ—¶ä¸ºfalse
  "favorite_count": 15
}
```

### 5. æˆ‘çš„æ”¶è—åˆ—è¡¨

**æŸ¥è¯¢å‚æ•°**
- `page=1` - é¡µç  (â‰¥1)
- `size=20` - æ¯é¡µæ•°é‡ (1-100)

**æˆåŠŸå“åº” (200)**
```json
{
  "items": [
    {
      "id": 1,
      "document_id": 123,
      "document_title": "Vue3å¼€å‘æŒ‡å—",
      "document_summary": "è¯¦ç»†ä»‹ç»Vue3çš„æ–°ç‰¹æ€§",
      "file_type": "md",
      "created_at": "2025-01-27T10:30:45.123456"
    }
  ],
  "total": 50,
  "page": 1,
  "size": 20,
  "pages": 3
}
```

### 6. åˆ›å»ºè¯„è®º/å›å¤

**è¯·æ±‚å‚æ•°**
```json
{
  "content": "è¿™ç¯‡æ–‡æ¡£å†™å¾—å¾ˆå¥½ï¼",
  "parent_id": null              // å›å¤æ—¶ä¼ å…¥çˆ¶è¯„è®ºID
}
```

**æˆåŠŸå“åº” (200)**
```json
{
  "success": true,
  "message": "è¯„è®ºæˆåŠŸ",         // æˆ– "å›å¤æˆåŠŸ"
  "comment": {
    "id": 1,
    "content": "è¿™ç¯‡æ–‡æ¡£å†™å¾—å¾ˆå¥½ï¼",
    "user": {
      "id": 456,
      "username": "alice",
      "nickname": "å°çˆ±"
    },
    "replies": [],
    "reply_count": 0,
    "created_at": "2025-01-27T10:30:45.123456",
    "updated_at": "2025-01-27T10:30:45.123456"
  }
}
```

### 7. è·å–è¯„è®ºåˆ—è¡¨ï¼ˆå…¬å¼€æ¥å£ï¼‰

**æŸ¥è¯¢å‚æ•°**
- `page=1` - é¡µç  (â‰¥1)
- `size=20` - æ¯é¡µæ•°é‡ (1-100)

**æˆåŠŸå“åº” (200)**
```json
{
  "items": [
    {
      "id": 1,
      "content": "è¿™ç¯‡æ–‡æ¡£å†™å¾—å¾ˆå¥½ï¼",
      "user": {
        "id": 456,
        "username": "alice",
        "nickname": "å°çˆ±"
      },
      "replies": [
        {
          "id": 2,
          "content": "æˆ‘ä¹Ÿè§‰å¾—å¾ˆæ£’ï¼",
          "user": {
            "id": 789,
            "username": "bob",
            "nickname": "å°æ˜"
          },
          "created_at": "2025-01-27T11:00:00.000000",
          "updated_at": "2025-01-27T11:00:00.000000"
        }
      ],
      "reply_count": 1,
      "created_at": "2025-01-27T10:30:45.123456",
      "updated_at": "2025-01-27T10:30:45.123456"
    }
  ],
  "total": 10,
  "page": 1,
  "size": 20,
  "pages": 1
}
```

### 8. æ›´æ–°è¯„è®ºå†…å®¹

**è¯·æ±‚å‚æ•°**
```json
{
  "content": "ä¿®æ”¹åçš„è¯„è®ºå†…å®¹"
}
```

**æˆåŠŸå“åº” (200)** - åŒåˆ›å»ºè¯„è®ºå“åº”æ ¼å¼

### 9. åˆ é™¤è¯„è®º

**æˆåŠŸå“åº” (200)**
```json
{
  "success": true,
  "message": "è¯„è®ºåˆ é™¤æˆåŠŸ"
}
```

### 10. æ–‡æ¡£äº’åŠ¨ç»Ÿè®¡ï¼ˆå…¬å¼€æ¥å£ï¼‰

**æˆåŠŸå“åº” (200)**
```json
{
  "document_id": 123,
  "like_count": 25,
  "favorite_count": 15,
  "comment_count": 8,
  "updated_at": "2025-01-27T12:00:00.000000"
}
```

### 11. æˆ‘çš„äº’åŠ¨ç»Ÿè®¡

**æˆåŠŸå“åº” (200)**
```json
{
  "total_likes_given": 50,        // æˆ‘ç‚¹èµçš„æ•°é‡
  "total_favorites": 30,          // æˆ‘æ”¶è—çš„æ•°é‡
  "total_comments": 20,           // æˆ‘è¯„è®ºçš„æ•°é‡
  "total_likes_received": 100,    // æˆ‘çš„æ–‡æ¡£æ”¶åˆ°çš„ç‚¹èµ
  "total_favorites_received": 60, // æˆ‘çš„æ–‡æ¡£æ”¶åˆ°çš„æ”¶è—
  "total_comments_received": 40   // æˆ‘çš„æ–‡æ¡£æ”¶åˆ°çš„è¯„è®º
}
```

---

## ğŸ“ è¯„è®ºè§„åˆ™è¯´æ˜

### è¯„è®ºå±‚çº§
- **ä¸€çº§è¯„è®º**ï¼šç›´æ¥å¯¹æ–‡æ¡£çš„è¯„è®º
- **äºŒçº§å›å¤**ï¼šå¯¹ä¸€çº§è¯„è®ºçš„å›å¤
- **é™åˆ¶**ï¼šä¸æ”¯æŒä¸‰çº§åŠä»¥ä¸Šå›å¤

### è¯„è®ºæ“ä½œ
- **åˆ›å»º**ï¼š`parent_id=null` åˆ›å»ºè¯„è®ºï¼Œ`parent_id=è¯„è®ºID` åˆ›å»ºå›å¤
- **ç¼–è¾‘**ï¼šåªèƒ½ç¼–è¾‘è‡ªå·±çš„è¯„è®º
- **åˆ é™¤**ï¼šè½¯åˆ é™¤ï¼Œåˆ é™¤ä¸€çº§è¯„è®ºä¼šåŒæ—¶åˆ é™¤æ‰€æœ‰å›å¤

---

## âŒ é”™è¯¯å“åº”

- `400` - `{"detail": "ä¸æ”¯æŒä¸‰å±‚åŠä»¥ä¸Šå›å¤"}`
- `403` - `{"detail": "æ— æƒé™æ“ä½œæ­¤è¯„è®º"}`
- `404` - `{"detail": "æ–‡æ¡£ä¸å­˜åœ¨"}`
- `404` - `{"detail": "è¯„è®ºä¸å­˜åœ¨æˆ–æ— æƒé™ä¿®æ”¹"}`
- `422` - å‚æ•°æ ¼å¼é”™è¯¯
