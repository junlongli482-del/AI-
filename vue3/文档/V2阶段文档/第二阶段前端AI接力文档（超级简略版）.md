# ğŸ“˜ Vue3 ç”¨æˆ·ç³»ç»Ÿå‰ç«¯ â€” æŠ€æœ¯æ–‡æ¡£

> **ç‰ˆæœ¬**: v2.0  
> **ç«¯å£**: 5173  
> **åç«¯**: http://localhost:8100/api/v1

---

## ä¸€ã€é¡¹ç›®ç»“æ„

```bash
vue3/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/v1/                    # åç«¯æ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ user_register/         # æ³¨å†Œæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ user_auth/             # ç™»å½•è®¤è¯
â”‚   â”‚   â”œâ”€â”€ user_profile/          # ç”¨æˆ·èµ„æ–™
â”‚   â”‚   â””â”€â”€ password_manager/      # å¯†ç ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ v1/                    # ç”¨æˆ·ç³»ç»Ÿé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Register.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.vue           # å¯¼èˆªå‹ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ UserCenter.vue
â”‚   â”‚   â”‚   â””â”€â”€ ChangePassword.vue
â”‚   â”‚   â””â”€â”€ v2/                    # AIå¹³å°é¡µé¢
â”‚   â”‚       â””â”€â”€ AIPlatform.vue
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/user.js             # Piniaç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ router/index.js            # è·¯ç”±+å®ˆå«
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ request.js             # Axioså°è£…
â”‚       â””â”€â”€ auth.js                # Tokenç®¡ç†
â”‚
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.js
```
## ğŸ“Œ å…¨å±€å¯¼èˆªæ ç»„ä»¶è¯´æ˜

### æ–‡ä»¶ä½ç½®
`src/components/layout/AppHeader.vue`

### ä½œç”¨
- **ç»Ÿä¸€çš„é¡¶éƒ¨å¯¼èˆªæ **ï¼Œæ‰€æœ‰ä¸»è¦é¡µé¢å…±ç”¨
- åŒ…å«ï¼šLogoã€å¯¼èˆªèœå•ã€ç”¨æˆ·ä¸‹æ‹‰èœå•

### ä½¿ç”¨æ–¹æ³•
```vue
<template>
  <div class="page-wrapper">
    <AppHeader />  <!-- ç›´æ¥å¼•å…¥ -->
    <div class="page-content">
      <!-- ä½ çš„é¡µé¢å†…å®¹ -->
    </div>
  </div>
</template>

<script setup>
import AppHeader from '@/components/layout/AppHeader.vue'
</script>
```

### å¦‚ä½•æ·»åŠ æ–°å¯¼èˆªé¡¹
åœ¨ `AppHeader.vue` ä¸­æ‰¾åˆ° `<nav class="nav-menu">`ï¼Œæ·»åŠ ï¼š
```vue
<router-link to="/new-page" class="nav-item">
  æ–°é¡µé¢
</router-link>
```

### ç‰¹ç‚¹
- âœ… è‡ªåŠ¨é«˜äº®å½“å‰é¡µé¢ï¼ˆ`router-link-active` ç±»ï¼‰
- âœ… è‡ªåŠ¨è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆä» `useUserStore`ï¼‰
- âœ… å¤„ç†ç™»å½•/ç™»å‡ºé€»è¾‘

**å°±è¿™æ ·ï¼** ä»¥åæ–°é¡µé¢ç›´æ¥ `<AppHeader />` å°±è¡Œã€‚
---

## äºŒã€æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. å·¥å…·å‡½æ•° (`utils/`)

#### `request.js` - HTTPè¯·æ±‚å°è£…
```javascript
// åŸºç¡€é…ç½®
baseURL: 'http://localhost:8100/api/v1'
timeout: 10000

// è‡ªåŠ¨åŠŸèƒ½
- è¯·æ±‚è‡ªåŠ¨æºå¸¦Token (Authorization: Bearer xxx)
- å“åº”ç»Ÿä¸€é”™è¯¯å¤„ç† (401è·³è½¬ç™»å½•ã€æ˜¾ç¤ºé”™è¯¯æç¤º)
```

#### `auth.js` - Tokenç®¡ç†
```javascript
getToken()    // è·å–localStorageä¸­çš„token
setToken()    // ä¿å­˜token
removeToken() // æ¸…é™¤token
```

---

### 2. çŠ¶æ€ç®¡ç† (`stores/user.js`)

```javascript
// çŠ¶æ€
state: {
  token: '',
  userInfo: null
}

// æ–¹æ³•
login()        // ç™»å½•å¹¶ä¿å­˜token
getUserInfo()  // è·å–ç”¨æˆ·ä¿¡æ¯
logout()       // æ¸…é™¤çŠ¶æ€å’Œtoken
```

---

### 3. è·¯ç”±é…ç½® (`router/index.js`)

#### è·¯ç”±è¡¨
```javascript
/                    â†’ é‡å®šå‘åˆ° /home
/login               â†’ ç™»å½•é¡µ
/register            â†’ æ³¨å†Œé¡µ
/home                â†’ ä¸»é¡µ (éœ€ç™»å½•)
/user-center         â†’ ç”¨æˆ·ä¸­å¿ƒ (éœ€ç™»å½•)
/change-password     â†’ ä¿®æ”¹å¯†ç  (éœ€ç™»å½•)
/ai-platform         â†’ AIå¼€å‘å¹³å° (éœ€ç™»å½•)
```

#### è·¯ç”±å®ˆå«
```javascript
// æœªç™»å½•è®¿é—®å—ä¿æŠ¤é¡µé¢ â†’ è·³è½¬ç™»å½•
// å·²ç™»å½•è®¿é—®ç™»å½•/æ³¨å†Œé¡µ â†’ è·³è½¬ä¸»é¡µ
```

---

### 4. APIæ¥å£å±‚ (`api/v1/`)

#### å·²å®ç°æ¥å£
```javascript
// æ³¨å†Œæ¨¡å—
checkUsername(username)  // æ£€æŸ¥ç”¨æˆ·åå¯ç”¨æ€§
checkEmail(email)        // æ£€æŸ¥é‚®ç®±å¯ç”¨æ€§
register(data)           // ç”¨æˆ·æ³¨å†Œ

// è®¤è¯æ¨¡å—
login(data)              // ç”¨æˆ·ç™»å½•
getCurrentUser()         // è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

// ç”¨æˆ·èµ„æ–™
getUserProfile()         // è·å–ç”¨æˆ·èµ„æ–™
updateNickname(nickname) // æ›´æ–°æ˜µç§°
checkNickname(nickname)  // æ£€æŸ¥æ˜µç§°å¯ç”¨æ€§

// å¯†ç ç®¡ç†
changePassword(data)     // ä¿®æ”¹å¯†ç 
checkPasswordStrength()  // æ£€æŸ¥å¯†ç å¼ºåº¦
```

---

## ä¸‰ã€å·²å®ŒæˆåŠŸèƒ½

### v1 ç”¨æˆ·ç³»ç»Ÿ
- âœ… ç”¨æˆ·æ³¨å†Œï¼ˆå®æ—¶éªŒè¯ã€å¯ç”¨æ€§æ£€æŸ¥ï¼‰
- âœ… ç”¨æˆ·ç™»å½•ï¼ˆæ”¯æŒç”¨æˆ·å/é‚®ç®±ï¼‰
- âœ… ç”¨æˆ·ä¸­å¿ƒï¼ˆæŸ¥çœ‹èµ„æ–™ã€ç¼–è¾‘æ˜µç§°ï¼‰
- âœ… ä¿®æ”¹å¯†ç ï¼ˆå¼ºåº¦æ£€æµ‹ã€åŸå¯†ç éªŒè¯ï¼‰
- âœ… å¯¼èˆªå‹ä¸»é¡µï¼ˆå¿«æ·å…¥å£å¡ç‰‡ï¼‰

### v2 AIå¼€å‘å¹³å°
- âœ… AIå¹³å°é¡µé¢ï¼ˆ3ä¸ªæ™ºèƒ½ä½“å¡ç‰‡ï¼‰
- âœ… ä½¿ç”¨è¯´æ˜é¢æ¿ï¼ˆå³ä¾§æ»‘å‡ºï¼‰
- âœ… å¤–éƒ¨é“¾æ¥è·³è½¬ï¼ˆæ–°æ ‡ç­¾é¡µï¼‰

---

## å››ã€å¼€å‘è§„èŒƒ

### æ–°åŠŸèƒ½å¼€å‘æµç¨‹
1. **ç¡®å®šç‰ˆæœ¬**: åœ¨ `views/v2/` æˆ– `views/v3/` åˆ›å»º
2. **åˆ›å»ºAPI**: åœ¨ `api/v2/` æˆ– `api/v3/` åˆ›å»ºå¯¹åº”æ¨¡å—
3. **æ·»åŠ è·¯ç”±**: åœ¨ `router/index.js` æ·»åŠ è·¯ç”±
4. **å¤ç”¨çŠ¶æ€**: ä¼˜å…ˆä½¿ç”¨ç°æœ‰ `stores/user.js`

### æ–‡ä»¶å‘½åè§„èŒƒ
- ç»„ä»¶: PascalCase (`UserCenter.vue`)
- æ–‡ä»¶å¤¹: snake_case (`user_profile/`)
- å‡½æ•°: camelCase (`getUserInfo()`)

### ç¦æ­¢ä¿®æ”¹åŒºåŸŸ
- âŒ `utils/request.js` - é™¤ééœ€è¦ä¿®æ”¹baseURL
- âŒ `utils/auth.js` - Tokenç®¡ç†é€»è¾‘
- âŒ `stores/user.js` - æ ¸å¿ƒç”¨æˆ·çŠ¶æ€
- âŒ `api/v1/` - å·²å®Œæˆçš„æ¥å£å°è£…

---

## äº”ã€å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­æ›´æ–°ï¼‰
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

---

## å…­ã€å¸¸è§é—®é¢˜

### è·¨åŸŸé—®é¢˜
åç«¯å·²é…ç½®CORSï¼Œæ— éœ€å‰ç«¯å¤„ç†

### Tokenè¿‡æœŸ
è‡ªåŠ¨åœ¨ `request.js` ä¸­å¤„ç†ï¼Œè·³è½¬ç™»å½•é¡µ

### è·å–ç”¨æˆ·ä¿¡æ¯
```javascript
import { useUserStore } from '@/stores/user'

const userStore = useUserStore()
await userStore.getUserInfo()
```

---

## ä¸ƒã€æ‰©å±•ç‚¹

### ä¸»é¡µé¢„ç•™ä½ç½®
- ğŸ“Š é¡¹ç›®ç®¡ç†ï¼ˆé¢„ç•™å¡ç‰‡ï¼‰
- ğŸ“š å­¦ä¹ ä¸­å¿ƒï¼ˆé¢„ç•™å¡ç‰‡ï¼‰

### AIå¹³å°æ‰©å±•
- å¯æ·»åŠ æ›´å¤šæ™ºèƒ½ä½“è§’è‰²
- å¯é›†æˆå¯¹è¯å†å²è®°å½•
- å¯æ‰©å±•ä¸ºå®Œæ•´æ–‡æ¡£ç³»ç»Ÿ

---

**ğŸ’¡ æ–°åŠŸèƒ½å¼€å‘å‰ï¼Œè¯·å…ˆé˜…è¯»æœ¬æ–‡æ¡£ï¼Œäº†è§£å·²æœ‰æ¨¡å—å’Œç¦æ­¢ä¿®æ”¹åŒºåŸŸï¼**

ç‰¹åˆ«æ³¨æ„ç‰¹åˆ«æ³¨æ„ï¼šåœ¨éœ€è¦å¯¹ä»¥å‰çš„æ–‡ä»¶è¿›è¡Œå¢åŠ æˆ–è€…ä¿®æ”¹æ—¶å‘ç”¨æˆ·æå‡ºéœ€è¦è¿™äº›æ–‡ä»¶ã€‚ç­‰ç”¨æˆ·ç»™ä½ è¿™äº›æ–‡ä»¶çš„æ—¶å€™åœ¨è¿›è¡Œå¢åŠ å’Œä¿®æ”¹ã€‚ç»™å›ç”¨æˆ·ä¿®æ”¹æˆ–è€…å¢åŠ ä¹‹åçš„æ–‡ä»¶ã€‚

# 1ï¸âƒ£ æ¥å£å‚æ•°ä¿¡æ¯ä¸å®Œæ•´ï¼ˆæå…¶é‡è¦çš„å†…å®¹ï¼‰
é—®é¢˜ï¼š

æˆ‘åªçœ‹åˆ°äº†æ¥å£è·¯å¾„ï¼Œæ²¡æœ‰çœ‹åˆ°å…·ä½“çš„è¯·æ±‚å‚æ•°å’Œå“åº”æ ¼å¼
å¯¼è‡´æˆ‘çŒœæµ‹å‚æ•°ç»“æ„ï¼Œæµªè´¹æ—¶é—´åå¤ä¿®æ”¹
æ­£ç¡®åšæ³•ï¼š

éœ€è¦æä¾›å®Œæ•´çš„ components.schemas å®šä¹‰
æˆ–è€…æä¾›æµ‹è¯•ä»£ç ä¸­çš„å®é™…è°ƒç”¨ç¤ºä¾‹
æˆ–è€…æä¾›åç«¯ Pydantic æ¨¡å‹å®šä¹‰

# 2ï¸âƒ£ Vueå“åº”å¼ç³»ç»Ÿå¯¼è‡´çš„ç±»å‹è½¬æ¢é—®é¢˜ï¼ˆä¸‹é¢ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¿¡æ¯ï¼‰
é—®é¢˜ï¼š

JavaScript

const uploadId = uploadResult.upload_id  // è¿™æ˜¯ number: 38

const createData = {
upload_id: uploadId  // è¿™é‡Œå˜æˆäº† objectï¼
}
åŸå› ï¼š

Vue3 çš„å“åº”å¼ç³»ç»Ÿå¯èƒ½ä¼šå°†åŸå§‹å€¼åŒ…è£…æˆ Proxy å¯¹è±¡
ç‰¹åˆ«æ˜¯åœ¨ refã€reactive ç­‰å“åº”å¼æ•°æ®ä¸­æå–å€¼æ—¶
è§£å†³æ–¹æ¡ˆï¼š

JavaScript

// æ–¹æ³•1: ç›´æ¥åœ¨APIè°ƒç”¨æ—¶æ„é€ å¯¹è±¡ï¼ˆæ¨èï¼‰
await createDocumentFromUpload({
upload_id: uploadResult.upload_id,
title: fileTitle,
summary: fileSummary
})

// æ–¹æ³•2: ä½¿ç”¨ toRaw è·å–åŸå§‹å€¼
import { toRaw } from 'vue'
const rawId = toRaw(uploadId)

// æ–¹æ³•3: JSON åºåˆ—åŒ–ååºåˆ—åŒ–
const pureData = JSON.parse(JSON.stringify(data))